name: Build ISO

on:
  workflow_run:
    workflows: ["Upload ISO"]  # Navnet på din upload-workflow
    types:
      - completed  # Kør, når "Upload ISO" er færdig

jobs:
  build:
    runs-on: [self-hosted, Linux, label-2] # Eller 'ubuntu-latest', hvis du ikke bruger self-hosted runners

    steps:
      - name: Download artifact from previous workflow
        uses: actions/download-artifact@v4
        with:
          # Download from triggering workflow_run
          github-token: ${{ secrets.GITHUB_TOKEN }}
          run-id: ${{ github.event.workflow_run.id }}
          name: min-iso-fil
          path: ./iso/
          
#      - name: Checkout repository
#        uses: actions/checkout@v4
#
#      - name: Download original ISO
#        uses: actions/download-artifact@v4
#        with:
#          name: min-iso-fil  # Samme navn som i upload-workflowen
#          path: ./iso/       # Mappen, hvor ISO-filen skal gemmes

      - name: Vis indhold af downloadede filer
        run: |
          ls -la ./iso/  # Tjek, at ISO-filen er downloadet

#      - name: Build new ISO
#        run: |
#          # Kopier konfiguration til ISO-mappen (tilpas efter dit projekt)
#          mkdir -p ./iso/config/
#          cp -r ./config/* ./iso/config/
#
#          # Byg ny ISO (tilpas kommandoen efter dit værktøj)
#          mkisofs -o new-image.iso -V "MY_ISO" -J -r ./iso/
#          mv new-image.iso ./new-iso/
#
#      - name: Upload new ISO
#        uses: actions/upload-artifact@v4
#        with:
#          name: new-iso
#          path: ./new-iso/new-image.iso
